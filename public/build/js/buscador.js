const dominio="http://localhost";document.addEventListener("DOMContentLoaded",()=>{iniciarApp()});const iniciarApp=()=>{citasAPI(),buscador()},citasArr=[],citasAPI=async()=>{try{const e=dominio+"/api/vercitas",t=await fetch(e),n=await t.json();let a={},c={};idActual=0,n.forEach(e=>{const{id:t,hora:n,cliente:i,email:o,telefono:s,servicio:r,precio:d,fecha:l}=e;idActual!==t&&(a={id:t,cliente:i,telefono:s,email:o,hora:n,fecha:l,servicios:[],total:0},citasArr.push(a),idActual=t),c={servicio:r,precio:d},a.total+=Number(d),a.servicios.push(c)});const i=citasHoy();renderCitas(i)}catch(e){console.log(e)}},buscador=()=>{const e=document.querySelector("#titulo-buscador");document.querySelector("#buscador").addEventListener("input",t=>{if(document.querySelector(".inputs").innerHTML="","hoy"==t.target.value){e.textContent="Citas de Hoy";const t=citasHoy();t&&renderCitas(t)}if("fecha"==t.target.value){e.textContent="Citas por fecha";document.querySelector(".inputs").innerHTML='<input type="date" id="input-fecha">';document.querySelector("#input-fecha").addEventListener("input",e=>{const t=buscarFecha(e.target.value);renderCitas(t)})}"todas"==t.target.value&&(e.textContent="Todas las citas",renderCitas(citasArr))})},fecha="2022-03-22",citasHoy=()=>citasArr.filter(e=>e.fecha==fecha),buscarFecha=e=>citasArr.filter(t=>t.fecha==e),renderCitas=e=>{const t=document.querySelector("#citas");t.innerHTML="",e.forEach(e=>{const{id:n,cliente:a,telefono:c,email:i,fecha:o,hora:s,servicios:r,total:d}=e,l=document.createElement("DIV");l.classList.add("cita");const p=document.createElement("DIV");p.classList.add("cliente-info");const u=document.createElement("P");u.innerHTML="<span>Cita ID:</span> "+n,p.appendChild(u);const m=document.createElement("P");m.innerHTML="<span>Cliente:</span> "+a,p.appendChild(m),l.appendChild(p);const h=document.createElement("DIV");h.classList.add("cita-info");const C=document.createElement("DIV");C.classList.add("contacto-info");const f=document.createElement("P");f.innerHTML="<span>Contacto</span>",C.appendChild(f);const E=document.createElement("P");E.innerHTML="<span>Tel√©fono:</span> "+c,C.appendChild(E);const L=document.createElement("P");L.innerHTML="<span>Email:</span> "+i,C.appendChild(L);const H=document.createElement("P");H.innerHTML="<span>Fecha:</span> "+o,C.appendChild(H);const v=document.createElement("P");v.innerHTML="<span>Hora:</span> "+s,C.appendChild(v);const T=document.createElement("DIV");T.classList.add("servicio-info");const y=document.createElement("P");y.innerHTML="<span>Servicios</span>",T.appendChild(y),r.forEach(e=>{const{servicio:t,precio:n}=e,a=document.createElement("P");a.textContent=t,T.appendChild(a);const c=document.createElement("P");c.innerHTML=`<span>$${n}</span>`,T.appendChild(c)});const M=document.createElement("P");M.innerHTML="<span>Total:</span> $"+d,T.appendChild(M),h.appendChild(C),h.appendChild(T),l.appendChild(h);const P=document.createElement("DIV");P.innerHTML=`<form action="/api/eliminar" method="POST">\n        <input type="hidden" name="id" value="${n}">\n        <input type="submit" value="Eliminar" class="boton-eliminar">\n        </form>`,l.appendChild(P),t.appendChild(l)})};